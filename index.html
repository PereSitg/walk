<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sitges Walk</title>
    <style>
        :root {
            --blau-sitges: #0077cc;
            --blanc: #ffffff;
            --gris: #f0f2f5;
        }
        body {
            font-family: sans-serif;
            background-color: var(--gris);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }
        .card {
            background: var(--blanc);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            max-width: 400px;
            width: 100%;
            overflow: hidden;
        }
        .image-header {
            background: var(--blau-sitges);
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        .image-header img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .content { padding: 25px; }
        h1 { margin: 0 0 10px 0; font-size: 1.5rem; }
        p { line-height: 1.6; color: #444; }
        .btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin-top: 10px;
            border-radius: 12px;
            text-align: center;
            text-decoration: none;
            font-weight: bold;
            background-color: var(--blau-sitges);
            color: white;
        }
    </style>
</head>
<body>

<div class="card" id="app-card">
    <div class="image-header" id="foto-monument">
        üì∏ Foto en cam√≠...
    </div>
    <div class="content">
        <h1 id="nom-monument">Carregant...</h1>
        <p id="desc-monument">Estem connectant amb Sitges...</p>
        <a href="#" id="link-maps" class="btn">üó∫Ô∏è Com arribar-hi</a>
    </div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDQwBo1m8hoh1kk2AW7Tex51trJzeDBejU",
    authDomain: "sitgeswalk.firebaseapp.com",
    projectId: "sitgeswalk",
    storageBucket: "sitgeswalk.firebasestorage.app",
    messagingSenderId: "13367453792",
    appId: "1:13367453792:web:ee3a8dbae2df721b8f3b05"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function carregarDades() {
    const querySnapshot = await getDocs(collection(db, "monuments"));
    
    // Agafem el primer monument que trobem a la teva BBDD
    if (!querySnapshot.empty) {
        const monument = querySnapshot.docs[0].data();
        
        document.getElementById("nom-monument").innerText = monument.nom;
        document.getElementById("desc-monument").innerText = monument.descripcio;
        
        // Si hi ha foto la posem, si no, deixem el text
        if (monument.imatge) {
            document.getElementById("foto-monument").innerHTML = `<img src="${monument.imatge}" alt="${monument.nom}">`;
        }
        
        // Configurem el bot√≥ de Google Maps
        document.getElementById("link-maps").href = `https://www.google.com/maps?q=${monument.lat},${monument.lon}`;
    }
  }

  carregarDades();
</script>

</body>
</html>
